{% extends 'base.html' %}

{% block content %}
<h2>Add Subject</h2>
<form method="post">
  <div class="form-group">
    <label for="subject-type">Choose Type</label>
    <select class="form-control" id="subject-type" name="subject_type" onchange="handleTypeChange(this.value)">
      <option value="new">New</option>
      <option value="existing">Existing</option>
    </select>
  </div>
  <div id="new-subject" class="form-group">
    <label for="new-subject-input">New Subject</label>
    <input type="text" class="form-control" id="new-subject-input" name="new_subject">
  </div>
  <div id="existing-subject" class="form-group" style="display: none;">
    <label for="existing-subject-select">Existing Subject</label>
    <select class="form-control" id="existing-subject-select" name="existing_subject">
      {% for subject in existing_subjects %}
      <option value="{{ subject }}">{{ subject }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="form-group">
    <label for="surah-name">Surah Name</label>
    <input type="text" class="form-control" id="surah-name" name="surah_name" required>
  </div>
  <div class="form-group">
    <label for="from-verse">From Verse</label>
    <input type="number" class="form-control" id="from-verse" name="from_verse" required>
  </div>
  <div class="form-group">
    <label for="to-verse">To Verse</label>
    <input type="number" class="form-control" id="to-verse" name="to_verse" required>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>

<script>
function handleTypeChange(value) {
  document.getElementById('new-subject').style.display = value === 'new' ? 'block' : 'none';
  document.getElementById('existing-subject').style.display = value === 'existing' ? 'block' : 'none';
}

// Initialize the form display based on the current selection
document.addEventListener('DOMContentLoaded', function() {
  handleTypeChange(document.getElementById('subject-type').value);
});
</script>
{% endblock %}
